(function($){$(function(){var _2=function(_3){var _4=0;name=_3;if(!Array.prototype.indexOf){Array.prototype.indexOf=function(_5){if(arguments.length==2){_4=arguments[1];}var _6=this;for(var i=_4;i<_6.length;i++){if(_6[i]==_5){return i;}}return -1;};}if(document.cookie.length>0){var _8=document.cookie.indexOf(name);if(_8!=-1){_8+=_3.length+1;var _9=document.cookie.indexOf(";",_8);if(_9==-1){_9=document.cookie.length;}return document.cookie.substring(_8,_9);}}return "";};var _a=function(_b,_c,_d){var _e=new Date();_e.setDate(_e.getDate()+_d);document.cookie=_b+"="+escape(_c)+((_d==null)?"":";expires="+_e.toGMTString());};var _f=function(_10){var _c=-1;if(arguments.length==2){_c=arguments[1];}if(_10.length<=0){$(".actpost").append("<input type=\"hidden\" name=\"location\" value=\""+nowLatitude+","+nowLongitude+"\" />");$("#location-button").attr("title","\u5173\u95ed\u5730\u7406\u4f4d\u7f6e");$("#location-button").css("background-position","100% 0");if(_c===0){_a("loc","1",7);}}else{$("[name='location']").remove();$("#location-button").attr("title","\u6dfb\u52a0\u5730\u7406\u4f4d\u7f6e");$("#location-button").css("background-position","0 0");if(_c===0){_a("loc","",-7);}}};var _12=function(_13){var _14;try{if(typeof (navigator.geolocation)=="undefined"){_14=google.gears.factory.create("beta.geolocation");}else{_14=navigator.geolocation;}}catch(error){}if(_14){_14.getCurrentPosition(function(_15){nowLatitude=_15.coords.latitude;nowLongitude=_15.coords.longitude;_location=$("[name='location']");if(_13===1){_f(_location);}else{_f(_location,0);}},function(_16){});}};$(document).ready(function(){if(typeof (navigator.geolocation)=="undefined"){$("#location-button").remove();}else{if(_2("loc")==="1"){_12(1);}}});$("#location-button").click(_12);});})(jQuery);